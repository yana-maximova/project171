(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d377c64"],{2059:function(e,t,s){"use strict";var n=s("20ee"),o=s.n(n);o.a},"20ee":function(e,t,s){},2184:function(e,t,s){"use strict";var n=s("f62d"),o=s.n(n);o.a},2627:function(e,t,s){"use strict";var n=s("382f"),o=s.n(n);o.a},"35dc":function(e,t,s){"use strict";var n=s("fe93"),o=s.n(n);o.a},"382f":function(e,t,s){},b50c:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-sm tabs"},[s("ul",{staticClass:"tab-list"},e._l(e.tabs,(function(t,n){return s("li",{key:t.title,class:{active:t.isActive},on:{click:function(t){return e.select(n)}}},[e._v(" "+e._s(t.title)+" ")])})),0),s("div",{staticClass:"tab-content"},[s("transition",{attrs:{name:"fade",appear:""}},[s("KeepAlive",[s(e.tabs[e.selectedIndex].component,{tag:"component",staticClass:"tab-components",attrs:{payload:e.tabs[e.selectedIndex].payload}})],1)],1)],1)])},o=[],i=(s("4160"),s("159b"),{name:"Tabs",props:{tabs:{type:Array,required:!0}},data:function(){return{selectedIndex:0}},created:function(){this.select(0)},methods:{select:function(e){this.selectedIndex=e,this.tabs.forEach((function(t,s){t.isActive=s===e}))}}}),a=i,c=(s("2184"),s("2877")),l=Object(c["a"])(a,n,o,!1,null,"eaaeb494",null);t["a"]=l.exports},f62d:function(e,t,s){},fc76:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{attrs:{tabs:e.tabs}})},o=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loading?s("Spinner",{attrs:{info:""}}):s("div",{staticClass:"d-flex flex-column"},[e.showJson?s("JsonViewer",{attrs:{jsonContent:e.selectedImage.blocks},on:{hideJson:function(t){e.showJson=!1}}}):e._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 list"},[s("AnnotationsList",{attrs:{items:e.images,modified:e.modified},on:{viewJson:function(t){e.showJson=!0},selected:function(t){return e.selectImage(t)},remove:function(t){return e.removeImage(t)},addImage:function(t){return e.addImage(t)},saveImages:e.saveImages}})],1),s("div",{staticClass:"col-md-8"},[s("ImageMarkup",{attrs:{showBlockControls:!0,image:e.selectedImage.image,imageSize:{width:e.selectedImage.width,height:e.selectedImage.height}},model:{value:e.selectedImage.blocks,callback:function(t){e.$set(e.selectedImage,"blocks",t)},expression:"selectedImage.blocks"}})],1)])],1)},a=[],c=s("ddaa"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"list"},[s("div",{staticClass:"d-flex my-1"},[s("input",{ref:"inputImage",staticClass:"hidden",attrs:{type:"file",accept:".jpg, .jpeg, .png",multiple:""},on:{change:function(t){return e.$emit("addImage",t)}}}),s("div",{staticClass:"btn-icon",on:{click:e.addItem}},[s("font-awesome-icon",{attrs:{icon:"plus"}})],1),s("div",{staticClass:"btn-icon",class:{disabled:!e.modified},on:{click:function(t){return e.$emit("saveImages")}}},[s("font-awesome-icon",{attrs:{icon:"save"}})],1)]),s("div",{staticClass:"content"},[s("table",{staticClass:"table table-sm table-hover"},[s("tbody",e._l(e.items,(function(t,n){return s("tr",{key:n,attrs:{scope:"row"},on:{click:function(t){return e.selectItem(n)}}},[s("td",{class:{selected:e.selectedItem===n}},[e._v(e._s(t.file))]),s("td",[s("div",{staticClass:"d-flex justify-content-end"},[s("a",{staticClass:"control",on:{click:function(t){return t.preventDefault(),e.viewJSON(t)}}},[s("font-awesome-icon",{attrs:{icon:"eye"}})],1),s("a",{staticClass:"control",on:{click:function(t){return t.preventDefault(),e.removeItem(n)}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1)])])])})),0)])])])},r=[],d={props:{items:{type:Array,required:!0},modified:{type:Boolean,required:!0},typeBlocks:{type:String,default:"blocks"}},name:"AnnotationsList",data:function(){return{selectedItem:-1}},methods:{viewJSON:function(){this.$emit("viewJson")},removeItem:function(e){this.$emit("remove",{key:e})},selectItem:function(e){this.selectedItem=e,this.$emit("selected",{key:e})},addItem:function(){this.$emit("loading"),"letterBlocks"===this.typeBlocks?this.$store.dispatch("createLettersFromBlocks"):this.$refs.inputImage.click()}}},m=d,u=(s("2059"),s("2877")),f=Object(u["a"])(m,l,r,!1,null,"342ed8e7",null),g=f.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"viewer"},[s("div",{staticClass:"overlay",on:{click:function(t){return t.stopPropagation(),e.hide(t)}}}),s("div",{staticClass:"content"},[s("button",{staticClass:"btn-icon close",on:{click:function(t){return t.stopPropagation(),e.hide(t)}}},[s("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),s("pre",[e._v(e._s(e.jsonContent))])])])},p=[],v={name:"JsonViewer",props:{jsonContent:null},data:function(){return{}},methods:{hide:function(){this.$emit("hideJson")}}},I=v,b=(s("35dc"),Object(u["a"])(I,h,p,!1,null,"75455d3e",null)),k=b.exports,w=s("2236"),y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"spinner"},[s("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}}),s("div",{staticClass:"message"},[e._v(" "+e._s(e.message)+" ")]),s("div",{staticClass:"message"},[e._v(" "+e._s(e.info)+" ")])])},C=[],$=s("4a9d"),_={name:"Spinner",props:{message:{type:String,default:function(){return"Загрузка"}}},data:function(){return{info:""}},methods:{messageHandler:function(e){this.info=e.message}},mounted:function(){$["b"].$on("logFromPython",this.messageHandler)},beforeDestroy:function(){$["b"].$off("logFromPython",this.messageHandler)}},J=_,x=(s("2627"),Object(u["a"])(J,y,C,!1,null,"0a464522",null)),B=x.exports,j={blocks:[],image:[]},A={name:"Annotation",components:{AnnotationsList:g,ImageMarkup:c["a"],JsonViewer:k,Spinner:B},mixins:[w["a"]],data:function(){return{selectedImage:j,showJson:!1,modified:!1,loading:!0}},computed:{images:function(){return this.$store.getters.blockImages}},watch:{images:{deep:!0,handler:function(){this.modified=!0}}},methods:{selectImage:function(e){this.selectedImage=this.images[e.key]},removeImage:function(e){this.selectedImage=j,this.$store.commit("removeBlockImage",e.key)},saveImages:function(){this.modified&&(console.log("save"),this.$store.dispatch("saveBlockImages"),this.modified=!1)},loadedHandler:function(){this.loading=!1}},mounted:function(){$["b"].$on("loaded",this.loadedHandler),this.$store.dispatch("loadBlockImages")},beforeDestroy:function(){$["b"].$off("loaded",this.loadedHandler)}},H=A,S=Object(u["a"])(H,i,a,!1,null,null,null),O=S.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loading?s("Spinner",{attrs:{info:""}}):s("div",{staticClass:"d-flex flex-column"},[e.showJson?s("JsonViewer",{attrs:{jsonContent:e.selectedImage.blocks},on:{hideJson:function(t){e.showJson=!1}}}):e._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 list"},[s("AnnotationsList",{attrs:{typeBlocks:"letterBlocks",items:e.images,modified:e.modified},on:{viewJson:function(t){e.showJson=!0},selected:function(t){return e.selectImage(t)},remove:function(t){return e.removeImage(t)},addImage:function(t){return e.addImage(t)},saveImages:e.saveImages,loading:function(t){e.loading=!0}}})],1),s("div",{staticClass:"col-md-8"},[s("ImageMarkup",{attrs:{showBlockControls:!0,image:e.selectedImage.image,imageSize:{width:e.selectedImage.width,height:e.selectedImage.height}},model:{value:e.selectedImage.blocks,callback:function(t){e.$set(e.selectedImage,"blocks",t)},expression:"selectedImage.blocks"}})],1)])],1)},L=[],P={blocks:[],image:[]},D={name:"AnnotationLetters",components:{AnnotationsList:g,ImageMarkup:c["a"],JsonViewer:k,Spinner:B},mixins:[w["a"]],data:function(){return{selectedImage:P,showJson:!1,modified:!1,loading:!0}},computed:{images:function(){return this.$store.getters.letterBlockImages}},watch:{images:{deep:!0,handler:function(){this.modified=!0}}},methods:{selectImage:function(e){this.selectedImage=this.images[e.key]},removeImage:function(e){this.selectedImage=P,this.$store.commit("removeBlockImage",e.key)},saveImages:function(){this.modified&&(this.$store.dispatch("saveBlockImages",{name:"letterBlocks"}),this.modified=!1)},messageHandler:function(e){this.message=e.messge},loadedHandler:function(){this.loading=!1}},mounted:function(){$["b"].$on("logFromPython",this.messageHandler),$["b"].$on("loaded",this.loadedHandler),this.$store.dispatch("loadBlockImages","letterBlocks")},beforeDestroy:function(){$["b"].$off("logFromPython",this.messageHandler),$["b"].$off("loaded",this.loadedHandler)}},F=D,V=Object(u["a"])(F,E,L,!1,null,null,null),M=V.exports,q=s("b50c"),T={name:"Annotations",components:{Tabs:q["a"]},data:function(){return{tabs:[{title:"Аннотации блоков ответов",component:O,payload:null},{title:"Аннотации блоков символов",component:M,payload:null}]}}},z=T,N=Object(u["a"])(z,n,o,!1,null,null,null);t["default"]=N.exports},fe93:function(e,t,s){}}]);